# Работа с динамическими массивами (Validation Field Array)

::: details Кейс использования
`ValidationFieldArray` используется в случаях, когда необходимо как-то модифицировать непосредственно сам массив.
Например: Добавить, удалить, переместить поле массива
:::

::: danger
`ValidationFieldArray` не поддерживает массив плоских полей, каждое поле массива должно быть объектом
:::

<<< @/.vitepress/components/FieldArray.vue{8-13,46,54-57}

`ValidationFieldArray` предоставляет методы работы с массивом, такие как: Полное обновление(onChange), добавление вначало(prepend)/конец(append)/по индексу(insert), перемещение(move), свап(swap), удаление(remove) элементов.
Более подробное описание методов можно найти [здесь](../api/validation-field-array.md)

## Ключевое поле (`keyName`)

Для корректной работы `ValidationFieldArray` обязательно должно быть зарегистировано это поле с помощью `ValidationField`, по-умолчанию используется поле `id`, но может быть изменено параметром [`keyName`](../api/validation-field-array.md#входные-параметры)

::: danger
При обходе `fields` обязательно указывать `key` со значением из поля переданного в `keyName`
:::

При использовании методов массива не обязательно передавать `keyName`, если он будет опущен, то сгенерируется автоматически

## Обработка фокуса

При работе с методами `ValidationFieldArray`, можно настроить поведение фокуса при вызове методов массива.
При вызове метода, передайте объект `focusOptions` в качестве последнего аргумента.

```ts
interface FocusOptions {
  field: string; // Указывает на имя поля, которое нужно поместить в фокус
  index?: number; // Указывает на индекс поля, которое нужно поместить в фокус
}
```
Index поле не обязательное, для каждой функции есть стандартное поведение при незаданном index:
- `append` - фокус на добавленное (последнее) поле
- `prepend` - фокус на добавленное (первое) поле
- `insert` - фокус на добавленное (указанное) поле
- `move` - фокус на перемещённое (to) поле
- `swap` - фокус на перемещённое (to) поле
- `remove` - фокус на предыдущее удалённому полю (если нет предыдущего то на первое)
